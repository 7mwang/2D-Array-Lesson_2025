<html lang="en">
    <form id="userForm">
        <label for="name">Name:</label>
        <input type="text" id="name" name="name" required><br>

        <label for="uid">User ID:</label>
        <input type="text" id="uid" name="uid" required><br>

        <label for="password">Password:</label>
        <input type="password" id="password" name="password"><br>

        <label for="kasm_server_needed">Kasm Server Needed:</label>
        <input type="checkbox" id="kasm_server_needed" name="kasm_server_needed"><br>

        <button type="button" onclick="submitForm()">Create User</button>
    </form>

    <script>
        async function submitForm() {
            const form = document.getElementById('userForm');
            const formData = new FormData(form);

            // Create the payload
            const payload = {
                name: formData.get('name'),
                uid: formData.get('uid'),
                password: formData.get('password'),
                kasm_server_needed: formData.get('kasm_server_needed') ? true : false
            };

            try {
                const response = await fetch('http://127.0.0.1:8087/api/user', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(payload)
                });

                if (response.ok) {
                    const user = await response.json();
                    alert('User created successfully: ' + JSON.stringify(user));
                } else {
                    const error = await response.json();
                    alert('Error: ' + error.message);
                }
            } catch (error) {
                alert('Error: ' + error.message);
            }
        }
    </script>
</html>
